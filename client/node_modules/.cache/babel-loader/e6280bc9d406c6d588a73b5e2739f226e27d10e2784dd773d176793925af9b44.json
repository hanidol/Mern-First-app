{"ast":null,"code":"var _jsxFileName = \"/Users/haninasri/Desktop/FulStuck/First-App/client/src/pages/Login/index.js\";\nimport React from \"react\";\nimport Joi from \"@hapi/joi\";\nimport _ from \"lodash\";\nimport Input from \"../../components/common/Input\";\nimport { connect } from \"react-redux\";\nimport { signIn } from \"../../actions/authAction\";\nimport Button from \"../../components/common/Button\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: {\n        email: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      email: Joi.string().email().required().label(\"Email\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n    this.handleChange = _ref => {\n      let {\n        currentTarget: input\n      } = _ref;\n      const errors = {\n        ...this.state.errors\n      };\n      const errorMessage = this.validateProperty(input);\n      if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n      const data = {\n        ...this.state.data\n      };\n      data[input.name] = input.value;\n      this.setState({\n        data,\n        errors\n      });\n    };\n    this.validateProperty = input => {\n      const {\n        name,\n        value\n      } = input;\n      const obj = {\n        [name]: value\n      };\n      const schema = {\n        [name]: this.schema[name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, schema);\n      return error ? error.details[0].message : null;\n    };\n    this.validate = () => {\n      const options = {\n        abortEarly: false\n      };\n      const result = Joi.validate(this.state.data, this.schema, options);\n      if (!result.error) return null;\n      const errors = {};\n      result.error.details.forEach(element => errors[element.path[0]] = element.message);\n      return errors;\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n      if (_.isEmpty(errors)) this.props.signIn(this.state.data);\n    };\n  }\n  render() {\n    const {\n      data,\n      errors\n    } = this.state;\n    const {\n      email,\n      password\n    } = data;\n    const {\n      authMessage,\n      loggedIn\n    } = this.props;\n    if (loggedIn) this.props.history.push(\"/\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background-container pt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"header\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            label: \"Email\",\n            type: \"email\",\n            error: errors[\"email\"],\n            iconClass: \"fas fa-envelope\",\n            onChange: this.handleChange,\n            placeholder: \"Please enter your email...\",\n            value: email,\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            type: \"password\",\n            label: \"Password\",\n            error: errors[\"password\"],\n            iconClass: \"fas fa-key\",\n            onChange: this.handleChange,\n            placeholder: \"Please enter your password...\",\n            value: password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), authMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white\",\n            children: authMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            disabled: this.validate(),\n            type: \"submit\",\n            label: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    loggedIn: state.auth.loggedIn,\n    authMessage: state.auth.authMessage\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    signIn: creds => dispatch(signIn(creds))\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"names":["React","Joi","_","Input","connect","signIn","Button","Login","Component","state","data","email","password","errors","schema","string","required","label","handleChange","currentTarget","input","errorMessage","validateProperty","name","value","setState","obj","error","validate","details","message","options","abortEarly","result","forEach","element","path","handleSubmit","e","preventDefault","isEmpty","props","render","authMessage","loggedIn","history","push","mapStateToProps","auth","mapDispatchToProps","dispatch","creds"],"sources":["/Users/haninasri/Desktop/FulStuck/First-App/client/src/pages/Login/index.js"],"sourcesContent":["import React from \"react\";\nimport Joi from \"@hapi/joi\";\nimport _ from \"lodash\";\nimport Input from \"../../components/common/Input\";\nimport { connect } from \"react-redux\";\nimport { signIn } from \"../../actions/authAction\";\nimport Button from \"../../components/common/Button\";\nimport \"./style.css\";\n\nclass Login extends React.Component {\n  state = {\n    data: {\n      email: \"\",\n      password: \"\",\n    },\n    errors: {},\n  };\n\n  schema = {\n    email: Joi.string().email().required().label(\"Email\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n  };\n\n  validateProperty = (input) => {\n    const { name, value } = input;\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const result = Joi.validate(this.state.data, this.schema, options);\n    if (!result.error) return null;\n\n    const errors = {};\n    result.error.details.forEach(\n      (element) => (errors[element.path[0]] = element.message)\n    );\n    return errors;\n  };\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const errors = this.validate();\n    if (_.isEmpty(errors)) this.props.signIn(this.state.data);\n  };\n\n  render() {\n    const { data, errors } = this.state;\n    const { email, password } = data;\n    const { authMessage, loggedIn } = this.props;\n    if (loggedIn) this.props.history.push(\"/\");\n    return (\n      <div className=\"background-container pt-5\">\n        <div className=\"container\">\n          <h1 className=\"header\">Login</h1>\n          <form onSubmit={this.handleSubmit}>\n            <Input\n              name=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              error={errors[\"email\"]}\n              iconClass=\"fas fa-envelope\"\n              onChange={this.handleChange}\n              placeholder=\"Please enter your email...\"\n              value={email}\n              autoFocus\n            />\n            <Input\n              name=\"password\"\n              type=\"password\"\n              label=\"Password\"\n              error={errors[\"password\"]}\n              iconClass=\"fas fa-key\"\n              onChange={this.handleChange}\n              placeholder=\"Please enter your password...\"\n              value={password}\n            />\n            {authMessage && <p className=\"text-white\">{authMessage}</p>}\n            <Button disabled={this.validate()} type=\"submit\" label=\"Login\" />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    loggedIn: state.auth.loggedIn,\n    authMessage: state.auth.authMessage,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signIn: (creds) => dispatch(signIn(creds)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}