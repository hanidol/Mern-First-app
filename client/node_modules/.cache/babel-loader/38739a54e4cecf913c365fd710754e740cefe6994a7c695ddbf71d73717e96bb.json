{"ast":null,"code":"import _asyncToGenerator from\"/Users/haninasri/Desktop/FulStuck/First-App/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/haninasri/Desktop/FulStuck/First-App/app/client/node_modules/@babel/runtime/regenerator/index.js\";import api from'../utils/api';import{setAlert}from'./alert';import{REGISTER_SUCCESS,REGISTER_FAIL,USER_LOADED,AUTH_ERROR,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT}from'./types';// Load User\nexport var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get('/auth');case 3:res=_context.sent;dispatch({type:USER_LOADED,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:AUTH_ERROR});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Register User\nexport var register=function register(_ref2){var name=_ref2.name,email=_ref2.email,githubusername=_ref2.githubusername,password=_ref2.password;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var body,res,errors;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:body={name:name,email:email,githubusername:githubusername,password:password};_context2.prev=1;_context2.next=4;return api.post('/users',body);case 4:res=_context2.sent;dispatch({type:REGISTER_SUCCESS,payload:res.data});dispatch(loadUser());_context2.next=14;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);errors=_context2.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:REGISTER_FAIL});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};// Login User\nexport var login=function login(email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var body,res,errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:body={email:email,password:password};_context3.prev=1;_context3.next=4;return api.post('/auth',body);case 4:res=_context3.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(loadUser());_context3.next=14;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);errors=_context3.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:LOGIN_FAIL});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();};// Logout/Clear Profile\nexport var logout=function logout(){return function(dispatch){dispatch({type:LOGOUT});};};","map":{"version":3,"names":["api","setAlert","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","loadUser","dispatch","get","res","type","payload","data","register","name","email","githubusername","password","body","post","errors","response","forEach","error","msg","login","logout"],"sources":["/Users/haninasri/Desktop/FulStuck/First-App/app/client/src/actions/auth.js"],"sourcesContent":["import api from '../utils/api';\nimport { setAlert } from './alert';\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n} from './types';\n\n// Load User\nexport const loadUser = () => async (dispatch) => {\n  try {\n    const res = await api.get('/auth');\n\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({ type: AUTH_ERROR });\n  }\n};\n\n// Register User\nexport const register =\n  ({ name, email, githubusername, password }) =>\n  async (dispatch) => {\n    const body = { name, email, githubusername, password };\n\n    try {\n      const res = await api.post('/users', body);\n\n      dispatch({\n        type: REGISTER_SUCCESS,\n        payload: res.data,\n      });\n\n      dispatch(loadUser());\n    } catch (err) {\n      const errors = err.response.data.errors;\n      if (errors) {\n        errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n      }\n\n      dispatch({ type: REGISTER_FAIL });\n    }\n  };\n\n// Login User\nexport const login = (email, password) => async (dispatch) => {\n  const body = { email, password };\n\n  try {\n    const res = await api.post('/auth', body);\n\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data,\n    });\n\n    dispatch(loadUser());\n  } catch (err) {\n    const errors = err.response.data.errors;\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({ type: LOGIN_FAIL });\n  }\n};\n\n// Logout/Clear Profile\nexport const logout = () => (dispatch) => {\n  dispatch({ type: LOGOUT });\n};\n"],"mappings":"2RAAA,MAAOA,IAAG,KAAM,cAAc,CAC9B,OAASC,QAAQ,KAAQ,SAAS,CAClC,OACEC,gBAAgB,CAChBC,aAAa,CACbC,WAAW,CACXC,UAAU,CACVC,aAAa,CACbC,UAAU,CACVC,MAAM,KACD,SAAS,CAEhB;AACA,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAQ,kGAAS,iBAAOC,QAAQ,gKAEvBV,IAAG,CAACW,GAAG,CAAC,OAAO,CAAC,QAA5BC,GAAG,eAETF,QAAQ,CAAC,CACPG,IAAI,CAAET,WAAW,CACjBU,OAAO,CAAEF,GAAG,CAACG,IACf,CAAC,CAAC,CAAC,+EAEHL,QAAQ,CAAC,CAAEG,IAAI,CAAER,UAAW,CAAC,CAAC,CAAC,oEAElC,iEAED;AACA,MAAO,IAAMW,SAAQ,CACnB,QADWA,SAAQ,WAChBC,KAAI,OAAJA,IAAI,CAAEC,KAAK,OAALA,KAAK,CAAEC,cAAc,OAAdA,cAAc,CAAEC,QAAQ,OAARA,QAAQ,iGACxC,kBAAOV,QAAQ,0IACPW,IAAI,CAAG,CAAEJ,IAAI,CAAJA,IAAI,CAAEC,KAAK,CAALA,KAAK,CAAEC,cAAc,CAAdA,cAAc,CAAEC,QAAQ,CAARA,QAAS,CAAC,yCAGlCpB,IAAG,CAACsB,IAAI,CAAC,QAAQ,CAAED,IAAI,CAAC,QAApCT,GAAG,gBAETF,QAAQ,CAAC,CACPG,IAAI,CAAEX,gBAAgB,CACtBY,OAAO,CAAEF,GAAG,CAACG,IACf,CAAC,CAAC,CAEFL,QAAQ,CAACD,QAAQ,EAAE,CAAC,CAAC,mFAEfc,MAAM,CAAG,aAAIC,QAAQ,CAACT,IAAI,CAACQ,MAAM,CACvC,GAAIA,MAAM,CAAE,CACVA,MAAM,CAACE,OAAO,CAAC,SAACC,KAAK,QAAKhB,SAAQ,CAACT,QAAQ,CAACyB,KAAK,CAACC,GAAG,CAAE,QAAQ,CAAC,CAAC,GAAC,CACpE,CAEAjB,QAAQ,CAAC,CAAEG,IAAI,CAAEV,aAAc,CAAC,CAAC,CAAC,sEAErC,mEAEH;AACA,MAAO,IAAMyB,MAAK,CAAG,QAARA,MAAK,CAAIV,KAAK,CAAEE,QAAQ,kGAAK,kBAAOV,QAAQ,0IACjDW,IAAI,CAAG,CAAEH,KAAK,CAALA,KAAK,CAAEE,QAAQ,CAARA,QAAS,CAAC,yCAGZpB,IAAG,CAACsB,IAAI,CAAC,OAAO,CAAED,IAAI,CAAC,QAAnCT,GAAG,gBAETF,QAAQ,CAAC,CACPG,IAAI,CAAEP,aAAa,CACnBQ,OAAO,CAAEF,GAAG,CAACG,IACf,CAAC,CAAC,CAEFL,QAAQ,CAACD,QAAQ,EAAE,CAAC,CAAC,mFAEfc,MAAM,CAAG,aAAIC,QAAQ,CAACT,IAAI,CAACQ,MAAM,CACvC,GAAIA,MAAM,CAAE,CACVA,MAAM,CAACE,OAAO,CAAC,SAACC,KAAK,QAAKhB,SAAQ,CAACT,QAAQ,CAACyB,KAAK,CAACC,GAAG,CAAE,QAAQ,CAAC,CAAC,GAAC,CACpE,CAEAjB,QAAQ,CAAC,CAAEG,IAAI,CAAEN,UAAW,CAAC,CAAC,CAAC,sEAElC,mEAED;AACA,MAAO,IAAMsB,OAAM,CAAG,QAATA,OAAM,SAAS,UAACnB,QAAQ,CAAK,CACxCA,QAAQ,CAAC,CAAEG,IAAI,CAAEL,MAAO,CAAC,CAAC,CAC5B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}